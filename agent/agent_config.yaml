# Agent Configuration
# This file defines agents and their tool configurations

agents:

  simple_agent:
    model: "x-ai/grok-4.1-fast"
    system_prompt: |
      You are a helpful assistant that can search the web and run bash commands.
      Use the tools available to help answer questions and complete tasks.
      When you have a complete answer, use the 'final_result' tool to present it.
      You have access to recent conversation history for context.
    temperature: 0.3
    max_turns: 10
    tools:
      - think
      - brave_search
      - bash_command
      - final_result
    terminal_tools:
      - final_result
#"openai/gpt-5-mini"
  memory_creation_agent:
    model: "deepseek-chat"
    system_prompt: |
      You are analyzing a medical diagnostic trajectory to extract learning experiences.

      You have:
      1. **Doctor's initial information**: What the doctor knew at the start
      2. **Dialogue trajectory**: What the doctor asked/tested and what they learned
      3. **Reference answer**: The complete patient information (not visible to doctor)


      and 
      - case_id: Unique identifier for this case
      - correct_diagnosis: The actual correct diagnosis
      - model_diagnosis: What the Doctor Agent diagnosed (incorrect)

      Extract AT MOST 3 critical decision points that teach diagnostic reasoning.

      ---

      ## WHAT TO EXTRACT
      focus on what is key information in reference answer for correct diagnosis but not in dialogue trajectory, 
      the missed information are the direction for improvement on decision
      **decision need to be improved** for example:
      - Vague questions when specific ones were needed
      - Missing obvious physical exam findings
      - Multiple tests when one would discriminate

      ---

      ## FIELD REQUIREMENTS

      **SITUATION** (1-2 sentences):
      - Age, sex, chief complaint
      - Key findings known AT THIS POINT in trajectory
      - What tests/questions have already been done
      Example: "47-year-old female with 3 weeks of fatigue, fever, RUQ pain. Vitals show fever 38.1Â°C, liver tender and enlarged on exam."

      **UNCERTAINTY** (2-4 diseases):
      - What was being considered at THIS moment
      - Not all theoretical possibilities
      Example: ["viral hepatitis", "drug induced hepatitis", "acute cholecystitis"]

      **ACTION** (must start with type):
      - "ASK PATIENT: [specific question]"
      - "PHYSICAL EXAM: [specific exam]"
      - "REQUEST TEST: [test name]"
      - "REQUEST IMAGE: [imaging study]"
      Example: "REQUEST TEST: hepatitis serologies"

      **RATIONALE** (1-2 sentences):
      Explain why THIS action is the best choice NOW, compared to alternatives.
      Example: "asking question about Pleuritic chest pain (worse with breathing) immediately narrows differential from cardiac causes to pulmonary/pleural causes (PE, pneumothorax, pleuritis). One question eliminates entire disease categories before testing."

      ## Workflow
      1. Use 'save_experience' for each learning point (include the case_id from input)
      2. Use 'complete_analysis' to submit the final analysis
    temperature: 0.3
    max_turns: 7
    tools:
      - save_experience
      - complete_analysis
    terminal_tools:
      - complete_analysis

  memory_retrieval_agent:
    model: "deepseek-chat"
    system_prompt: |
      You are a memory retrieval agent that filters diagnostic experiences for relevance.

      ## Input
      You receive:
      1. A clinical conversation history between doctor and patient/measurement
      2. A list of retrieved diagnostic experiences (id, observation)

      ## Task
      Analyze if any experiences medically DIRECTLY match the current clinical situation.
      - Only select experiences where the observation pattern closely matches current findings
      - If no experiences are directly relevant, select 'none'
      - Maximum 2 experiences can be selected

      ## Workflow
      1. Use 'think' to analyze the conversation and compare with experiences
      2. Use 'select_experiences' to pick relevant IDs or 'none'

      Be CONSERVATIVE - only select truly matching experiences, it is better to select none than to select irrelevant experiences.
    temperature: 0.1
    max_turns: 3
    tools:
      - think
      - select_experiences
    terminal_tools:
      - select_experiences

# Tool schemas are auto-generated from the @tool decorator in implementations.py
# The tool names here must match the names registered in the registry
